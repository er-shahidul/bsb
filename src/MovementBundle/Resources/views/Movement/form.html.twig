{% extends "@Movement/Default/base_form_page.html.twig" %}

{% block form_body %}
    <style>
        .startPoint span.twitter-typeahead {
            width: 100% !important;
        }
    </style>
        <div class="row">
            <div class="col-sm-12">
                <div class="col-sm-12" style="background:#f0f6fa;">
                    <h4> {{ pageTitle }} </h4>
                </div>
            </div>

            <div class="col-sm-12"><br/></div>
            <div class="col-sm-12">
                <div class="col-sm-1"></div>
                <div class="col-sm-11">
                <div class="col-sm-6">
                    {{ form_row(form.startDate) }}
                </div>
                <div class="col-sm-6">
                    {{ form_row(form.endDate) }}
                </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-1"></div>
                <div class="col-sm-11">
                <div class="col-sm-6 startPoint">
                    {{ form_row(form.startPoint) }}
                </div>
                <div class="col-sm-6">
                    {{ form_row(form.destinations) }}
                </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-1"></div>
                <div class="col-sm-11">
                <div class="col-sm-6">
                    {{ form_row(form.visitors) }}
                </div>
                <div class="col-sm-6">
                    {{ form_row(form.additionalMembers) }}
                </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-1"></div>
                <div class="col-sm-11">
                <div class="col-sm-6">
                    {{ form_row(form.travelBy) }}
                </div>
                <div class="col-sm-6">
                    {{ form_row(form.movementApproval) }}
                </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-1"></div>
                <div class="col-sm-11">
                <div class="col-sm-6">
                    {{ form_row(form.transportation) }}
                </div>
                <div class="col-sm-6">
                    {{ form_row(form.travelPlan) }}
                </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-12">
                    {{ form_row(form.description) }}
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-2"></div>
                <div class="col-sm-10">
                    {{ form_row(form.attachments) }}
                </div>
            </div>
            <div class="col-sm-12 right">
                <div class="col-sm-10" ></div>
                <div class="col-sm-2" >
                    {{ form_row(form.submit) }}
                </div>
            </div>
        </div>

{% endblock %}

{% block document_ready %}
    {#<script>#}

    var substringMatcher = function(strs) {
        return function findMatches(q, cb) {
        var matches, substringRegex;

        // an array that will be populated with substring matches
        matches = [];

        // regex used to determine if a string contains the substring `q`
        substrRegex = new RegExp(q, 'i');

        // iterate through the pool of strings and for any string that
        // contains the substring `q`, add it to the `matches` array
        $.each(strs, function(i, str) {
          if (substrRegex.test(str)) {
            matches.push(str);
          }
        });

        cb(matches);
      };
    };

    var states = {{ offices|raw }};

    $('.startPoint .typeahead').typeahead({
      hint: true,
      highlight: true,
      minLength: 1
    },
    {
      name: 'states',
      source: substringMatcher(states)
    });

{% endblock %}

{% block include_javascripts %}
    {{ parent() }}
    <script src="{{ asset('assets/global/plugins/typeahead.bundle.js') }}"></script>
{% endblock include_javascripts %}